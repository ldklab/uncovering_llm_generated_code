The provided Node.js code defines a class called `LinesAndColumns` which helps in mapping between string indices and line/column pairs. This class is useful when working with text data that involves line/column locations, such as in parsing or syntax highlighting applications. Hereâ€™s an overview of its functionality:

- The class takes a single string as a parameter and calculates offset positions for each line based on carriage return (`\r`) and line feed (`\n`) characters.
- The `locationForIndex` method converts a single character index into a line and column format.
- The `indexForLocation` method does the inverse, converting a line and column back into a single character index.
- The `lengthOfLine` method returns the length of a specific line.

Here's a possible rewrite of this code:

```javascript
"use strict";

class LinesAndColumns {
    constructor(string) {
        this.string = string;
        this.offsets = this.calculateOffsets(string);
    }

    calculateOffsets(string) {
        const offsets = [0];
        for (let offset = 0; offset < string.length;) {
            if (string[offset] === '\n') {
                offset += 1;
                offsets.push(offset);
            } else if (string[offset] === '\r') {
                offset += 1;
                if (string[offset] === '\n') offset += 1;
                offsets.push(offset);
            } else {
                offset += 1;
            }
        }
        return offsets;
    }

    locationForIndex(index) {
        if (index < 0 || index > this.string.length) return null;

        let line = 0;
        while (this.offsets[line + 1] <= index) {
            line++;
        }
        
        const column = index - this.offsets[line];
        return { line, column };
    }

    indexForLocation(location) {
        const { line, column } = location;
        if (line < 0 || line >= this.offsets.length) return null;
        if (column < 0 || column > this.lengthOfLine(line)) return null;
        
        return this.offsets[line] + column;
    }

    lengthOfLine(line) {
        const offset = this.offsets[line];
        const nextOffset = line === this.offsets.length - 1 ? this.string.length : this.offsets[line + 1];
        return nextOffset - offset;
    }
}

exports.__esModule = true;
exports["default"] = LinesAndColumns;
```