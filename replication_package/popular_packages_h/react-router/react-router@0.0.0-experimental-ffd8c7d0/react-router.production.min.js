import{createMemoryHistory as e,Action as t,parsePath as n}from"history";import{createContext as r,useRef as a,unstable_useTransition as l,useReducer as i,useLayoutEffect as o,createElement as c,useContext as u,useEffect as p,useMemo as s,useCallback as h,Children as f,isValidElement as d,Fragment as g}from"react";function m(e,t){if(!e)throw Error(t)}let v=r({pending:!1,static:!1}),y=r({outlet:null,params:{},pathname:"",route:null});function R(){return P()}function E({children:e=null,action:n=t.Pop,location:r,navigator:a,pending:l=!1,static:i=!1}){return $()&&m(!1),c(v.Provider,{children:e,value:{action:n,location:r,navigator:a,pending:l,static:i}})}function $(){return null!=u(v).location}function x(){return $()||m(!1),u(v).location}function S(){$()||m(!1);let e=u(v),t=e.navigator,n=e.pending,{pathname:r}=u(y),l=a(!1);return p(()=>{l.current=!0}),h((e,a={})=>{l.current&&("number"==typeof e?t.go(e):(e=F(e,r),(a.replace||n?t.replace:t.push)(e,a.state)))},[t,r,n])}function P(){return u(y).outlet}function j(e){let{pathname:t}=u(y);return s(()=>F(e,t),[e,t])}function w(e,t=""){let{pathname:n,params:r}=u(y);t=t?[n,t].join("/").replace(/\/\/+/g,"/"):n;let l=a(),i=x(),o=s(()=>O(e,i,t),[i,e,t]);return o?(l.current!==i&&(l.current=i,o.forEach(({route:e,params:t},n)=>e.preload&&e.preload(t,i,n))),o.reduceRight((e,{params:n,pathname:a,route:l})=>c(y.Provider,{children:l.element,value:{outlet:e,params:{...r,...n},pathname:[t,a].join("/").replace(/\/\/+/g,"/"),route:l}}),null)):null}function b(e){return e.map(e=>{let t={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||c(R,null),preload:e.preload};return e.children&&(t.children=b(e.children)),t})}function I(e){let t=[];return f.forEach(e,e=>{if(d(e))if(e.type===g)t.push.apply(t,I(e.props.children));else{var n={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e,preload:e.props.preload};e.props.children&&((e=I(e.props.children)).length&&(n.children=e)),t.push(n)}}),t}function O(e,t,r=""){if("string"==typeof t&&(t=n(t)),t=t.pathname||"/",r){if(r=r.replace(/^\/*/,"/").replace(/\/+$/,""),!t.startsWith(r))return null;t=t===r?"/":t.slice(r.length)}!function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=(e=e.split("/")).length;return e.some(C)&&(t+=-2),e.filter(e=>"*"!==e).reduce((e,t)=>e+(W.test(t)?2:""===t?1:10),t)}(t),e),{});!function(e,t){let n=e.slice(0);e.sort((e,r)=>t(e,r)||n.indexOf(e)-n.indexOf(r))}(e,(e,n)=>{let[r,,a]=e;e=t[r];let[l,,i]=n;return e!==(n=t[l])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(a,i)})}(e=function e(t,n=[],r="",a=[],l=[]){return t.forEach((t,i)=>{let o=[r,t.path].join("/").replace(/\/\/+/g,"/"),c=a.concat(t);i=l.concat(i),t.children&&e(t.children,n,o,c,i),n.push([o,c,i])}),n}(e));var a=null;for(r=0;null==a&&r<e.length;++r)e:{a=t;let n=e[r][1],i="/",o={},c=[];for(let e=0;e<n.length;++e){let t=n[e];var l="/"===i?a:a.slice(i.length)||"/";if(!(l=k({path:t.path,caseSensitive:t.caseSensitive,end:e===n.length-1},l))){a=null;break e}i=[i,l.pathname].join("/").replace(/\/\/+/g,"/"),o={...o,...l.params},c.push({route:t,pathname:i,params:o})}a=c}return a}let W=/^:\w+$/,C=e=>"*"===e;function k(e,t){"string"==typeof e&&(e={path:e});let{path:n,caseSensitive:r=!1,end:a=!0}=e,[l,i]=function(e,t,n){let r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(a+="\\/?"),r.push("*"),a+="(.*)"):n&&(a+="\\/?"),n&&(a+="$"),[new RegExp(a,t?void 0:"i"),r]}(n,r,a);if(!(t=t.match(l)))return null;e=t[1];let o=t.slice(2);return t=i.reduce((e,t,n)=>{n=o[n];try{var r=decodeURIComponent(n.replace(/\+/g," "))}catch(a){r=n}return e[t]=r,e},{}),{path:n,pathname:e,params:t}}function F(e,t="/"){let{pathname:r,search:a="",hash:l=""}="string"==typeof e?n(e):e;return{pathname:r?M(r,r.startsWith("/")?"/":t):t,search:a,hash:l}}function M(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function A({children:t,initialEntries:n,initialIndex:r,timeoutMs:u=5e3}){let p=a();null==p.current&&(p.current=e({initialEntries:n,initialIndex:r}));let[s,h]=l({timeoutMs:u}),f=p.current,[d,g]=i((e,t)=>t,{action:f.action,location:f.location});return o(()=>f.listen(e=>{s(()=>{g(e)})}),[f,s]),c(E,{children:t,action:d.action,location:d.location,navigator:f,pending:h})}function H({to:e,replace:t,state:n}){$()||m(!1);let r=S();return p(()=>{r(e,{replace:t,state:n})}),null}function L({element:e=c(R,null)}){return e}function N({basename:e="",children:t}){return w(t=I(t),e)}function U(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&m(!1),t[n])).replace(/\/*\*$/,()=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function q(e,t=!0){$()||m(!1);let n=u(v).navigator;p(()=>{if(t){var r=n.block(t=>{e({...t,retry(){r(),t.retry()}})});return r}},[n,e,t])}function z(e){$()||m(!1);let t=u(v).navigator;return e=j(e),t.createHref(e)}function B(){return u(v).pending}function D(e){return $()||m(!1),k(e,x().pathname)}function G(){return u(y).params}function J(e,t=""){return $()||m(!1),w(s(()=>b(e),[e]),t)}export{A as MemoryRouter,H as Navigate,R as Outlet,L as Route,E as Router,N as Routes,b as createRoutesFromArray,I as createRoutesFromChildren,U as generatePath,k as matchPath,O as matchRoutes,F as resolvePath,q as useBlocker,z as useHref,$ as useInRouterContext,x as useLocation,B as useLocationPending,D as useMatch,S as useNavigate,P as useOutlet,G as useParams,j as useResolvedPath,J as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
