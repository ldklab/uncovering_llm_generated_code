The given Node.js code is a module that exports the `mongoose` library (located in the `./lib/` directory) and makes all of its functionalities available through the `module.exports` object. The code also re-exports certain methods and properties from `mongoose`, enabling support for ECMAScript Module (ESM) imports. The exported properties cover various features and components of `mongoose`, such as model creation, schema definitions, database connections, error handling, and various utilities.

Below is the rewritten code organized in a single markdown code block:

```javascript
'use strict';

const mongoose = require('./lib/');

module.exports = {
  ...mongoose,
  default: mongoose,
  mongoose: mongoose,
  cast: mongoose.cast,
  STATES: mongoose.STATES,
  setDriver: mongoose.setDriver,
  set: mongoose.set,
  get: mongoose.get,
  createConnection: mongoose.createConnection,
  connect: mongoose.connect,
  disconnect: mongoose.disconnect,
  startSession: mongoose.startSession,
  pluralize: mongoose.pluralize,
  model: mongoose.model,
  deleteModel: mongoose.deleteModel,
  modelNames: mongoose.modelNames,
  plugin: mongoose.plugin,
  connections: mongoose.connections,
  version: mongoose.version,
  Aggregate: mongoose.Aggregate,
  Mongoose: mongoose.Mongoose,
  Schema: mongoose.Schema,
  SchemaType: mongoose.SchemaType,
  SchemaTypes: mongoose.SchemaTypes,
  VirtualType: mongoose.VirtualType,
  Types: mongoose.Types,
  Query: mongoose.Query,
  Model: mongoose.Model,
  Document: mongoose.Document,
  ObjectId: mongoose.ObjectId,
  isValidObjectId: mongoose.isValidObjectId,
  isObjectIdOrHexString: mongoose.isObjectIdOrHexString,
  syncIndexes: mongoose.syncIndexes,
  Decimal128: mongoose.Decimal128,
  Mixed: mongoose.Mixed,
  Date: mongoose.Date,
  Number: mongoose.Number,
  Error: mongoose.Error,
  MongooseError: mongoose.MongooseError,
  now: mongoose.now,
  CastError: mongoose.CastError,
  SchemaTypeOptions: mongoose.SchemaTypeOptions,
  mongo: mongoose.mongo,
  mquery: mongoose.mquery,
  sanitizeFilter: mongoose.sanitizeFilter,
  trusted: mongoose.trusted,
  skipMiddlewareFunction: mongoose.skipMiddlewareFunction,
  overwriteMiddlewareResult: mongoose.overwriteMiddlewareResult,
};
```