The provided Node.js code sets up an Express server that serves an HTML page with a simple client-side application using a mock version of React Router DOM. Here's a breakdown of the functionality:

1. **Express Server Setup**: The server is created using Express and listens on port 3000. When a user accesses the root URL ('/'), the server responds by sending an HTML snippet that includes a root div for rendering the client-side app and a script tag to load `bundle.js`, which contains the client-side router implementation and components.

2. **Mock React Router DOM - `router-dom.js`**: This module exports mock implementations of BrowserRouter, Route, Link, and Switch that handle client-side routing:
   - `BrowserRouter`: A wrapper for navigation components, acting as a container.
   - `Route`: Chooses which component to render based on the current URL path.
   - `Link`: Renders anchor tags and updates the browser's history state manually when clicked instead of reloading the page.
   - `Switch`: Renders the first Route whose path matches the current URL.

3. **Client-side Rendering - `bundle.js`**: This file simulates a single-page application:
   - Two simple components, `Home` and `About`, return plain strings representing page content.
   - `App` function creates a main application view using the BrowserRouter and Switch components to switch between the Home and About pages based on the current route.
   - Finally, `App` renders the whole application inside the root div on the HTML page.

Here's a possible rewrite of the original code:

```javascript
// index.js
const express = require('express');
const routerDom = require('./router-dom');

const app = express();

app.get('/', (req, res) => {
  res.send(`
    <div id="root"></div>
    <script src="bundle.js"></script>
  `);
});

app.listen(3000, () => {
  console.log('Server is running on http://localhost:3000');
});

// router-dom.js
module.exports = {
  BrowserRouter: function (props) {
    return `<div>${props.children}</div>`;
  },
  Route: function ({ path, component: Component }) {
    if (window.location.pathname === path) {
      return `<div>${Component()}</div>`;
    }
    return null;
  },
  Link: function ({ to, children }) {
    return `<a href="${to}" onclick="window.history.pushState({}, '', '${to}'); return false;">${children}</a>`;
  },
  Switch: function ({ children }) {
    for (const element of children) {
      if (element) return element;
    }
    return null;
  }
};

// bundle.js
(function () {
  const rootElement = document.getElementById('root');

  function Home() {
    return 'Home Page';
  }

  function About() {
    return 'About Page';
  }

  function App() {
    return `
      ${routerDom.BrowserRouter({
        children: `
          ${routerDom.Link({ to: '/', children: 'Home' })}
          ${routerDom.Link({ to: '/about', children: 'About' })}
          ${routerDom.Switch({
            children: [
              routerDom.Route({ path: '/', component: Home }),
              routerDom.Route({ path: '/about', component: About }),
            ],
          })}
      `,
      })}
    `;
  }

  rootElement.innerHTML = App();
})();
```