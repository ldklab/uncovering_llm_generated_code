The `cookie` package provides utility functions to parse and serialize HTTP cookies. The package is especially useful for handling cookies in Node.js HTTP server environments. Here's a breakdown of its main functionalities:

1. **Parsing Cookies**: 
   - The `cookie.parse` function converts a string from a `Cookie` header into an object containing key-value pairs for each cookie. 
   - You can provide a `decode` function in the options to handle how cookie values are decoded. The default is `decodeURIComponent`.

2. **Serializing Cookies**: 
   - The `cookie.serialize` function generates a string suitable for a `Set-Cookie` header from a cookie name-value pair.
   - It accepts options for common `Set-Cookie` attributes such as `maxAge`, `expires`, `domain`, `path`, `httpOnly`, `secure`, `partitioned`, `priority`, and `sameSite`.
   - You can provide an `encode` function for encoding cookie values; it defaults to `encodeURIComponent`.

Here's an implementation of this functionality:

```js
// cookie.js
module.exports = {
  parse,
  serialize
};

function parse(cookieHeader, options = {}) {
  const decode = options.decode || decodeURIComponent;
  const cookies = {};

  if (!cookieHeader) {
    return cookies;
  }

  cookieHeader.split(';').forEach(cookie => {
    const [name, ...rest] = cookie.split('=');
    const value = rest.join('=').trim();
    if (!cookies[name.trim()]) {
      try {
        cookies[name.trim()] = decode(value);
      } catch (e) {
        cookies[name.trim()] = value;
      }
    }
  });

  return cookies;
}

function serialize(name, value, options = {}) {
  const encode = options.encode || encodeURIComponent;
  const pairs = [`${name}=${encode(value)}`];

  if (options.maxAge) {
    pairs.push(`Max-Age=${Math.floor(options.maxAge)}`);
  }

  if (options.domain) {
    pairs.push(`Domain=${options.domain}`);
  }

  if (options.path) {
    pairs.push(`Path=${options.path}`);
  }

  if (options.expires) {
    pairs.push(`Expires=${options.expires.toUTCString()}`);
  }

  if (options.httpOnly) {
    pairs.push('HttpOnly');
  }

  if (options.secure) {
    pairs.push('Secure');
  }

  if (options.partitioned) {
    pairs.push('Partitioned');
  }

  if (options.priority) {
    const priorityOption = { low: 'Low', medium: 'Medium', high: 'High' };
    pairs.push(`Priority=${priorityOption[options.priority] || 'Medium'}`);
  }

  if (typeof options.sameSite === 'string') {
    pairs.push(`SameSite=${options.sameSite.charAt(0).toUpperCase() + options.sameSite.slice(1)}`);
  } else if (options.sameSite === true) {
    pairs.push('SameSite=Strict');
  }

  return pairs.join('; ');
}

// Example of usage in a simple HTTP server (app.js)
const http = require('http');
const url = require('url');
const escapeHtml = require('escape-html');
const cookie = require('./cookie');

const server = http.createServer((req, res) => {
  const query = url.parse(req.url, true).query;
  let cookies = cookie.parse(req.headers.cookie || '');
  
  if (query.name) {
    res.setHeader('Set-Cookie', cookie.serialize('name', String(query.name), {
      httpOnly: true,
      maxAge: 7 * 24 * 60 * 60 // 1 week
    }));
    res.writeHead(302, { Location: '/' });
    res.end();
    return;
  }

  res.setHeader('Content-Type', 'text/html; charset=UTF-8');
  if (cookies.name) {
    res.write(`<p>Welcome back, <b>${escapeHtml(cookies.name)}</b>!</p>`);
  } else {
    res.write('<p>Hello, new visitor!</p>');
  }

  res.write('<form method="GET">');
  res.write('<input placeholder="enter your name" name="name"><input type="submit" value="Set Name">');
  res.end('</form>');
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});
```

This code provides the `cookie` module with its `parse` and `serialize` functions, and demonstrates usage in a simple HTTP server that sets a cookie to remember a user's name.