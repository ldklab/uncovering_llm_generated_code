The provided `mime` package offers functionality for dealing with MIME type information. Here is a summary of its key features and usage:

1. **Core Functionalities:**
   - It allows determining the MIME type of a file based on its extension or path using `getType`.
   - It can also reverse this process, providing a file extension based on a given MIME type using `getExtension`.
   - Additionally, `getAllExtensions` retrieves all possible extensions for a given MIME type.

2. **Integration with mime-db:**
   - The package includes data from `mime-db`, accounting for over 800 MIME types and 1,000 extensions.

3. **Versions and Requirements:**
   - Version 4 introduces changes like ESM module support and built-in TypeScript types.
   - It drops direct imports of `mime` properties and modifies the use of `define()` on the default object.

4. **Lite Version:**
   - The `mime/lite` variant excludes unofficial MIME types (`prs.*`, `x-*`, `vnd.*`).

5. **Custom Instances:**
   - Users can create mutable custom MIME instances using `new Mime()` and define their types with `define(type map [, force])`.

6. **Command Line Interface:**
   - The package includes CLI functionality, allowing users to query MIME types from extensions and vice versa.

The following code implements the described functionality:

```javascript
// mime.js
import mimeDb from 'mime-db';

class Mime {
  constructor(...typeMaps) {
    this.types = {};
    this.extensions = {};

    typeMaps.forEach(typeMap => this.define(typeMap));
  }

  define(typeMap, force = false) {
    for (const type in typeMap) {
      const exts = typeMap[type];
      if (!Array.isArray(exts)) throw new TypeError('Expected array of extensions');

      this.types[type] = exts[0];
      exts.forEach(ext => {
        if (!this.extensions[ext] || force) {
          this.extensions[ext] = type;
        } else {
          throw new Error(`Extension ${ext} is already defined`);
        }
      });
    }
  }

  getType(pathOrExtension) {
    const extension = pathOrExtension.split('.').pop().toLowerCase();
    return this.extensions[extension] || null;
  }

  getExtension(type) {
    return this.types[type.split(';')[0]] || null;
  }

  getAllExtensions(type) {
    const cleanType = type.split(';')[0];
    return new Set(Object.entries(this.extensions)
      .filter(([_, mimeType]) => mimeType === cleanType)
      .map(([ext, _]) => ext));
  }
}

const standardTypes = {}; // Define standardTypes based on mimeDb
const otherTypes = {}; // Define otherTypes based on custom needs

for (const type in mimeDb) {
  const entry = mimeDb[type];
  if (entry.extensions) {
    standardTypes[type] = entry.extensions;
  }
}

const defaultMime = new Mime(standardTypes, otherTypes);

function cli(args) {
  if (args.includes('-r')) {
    const type = args[args.indexOf('-r') + 1];
    console.log(defaultMime.getExtension(type));
  } else {
    const extensionOrPath = args[0];
    console.log(defaultMime.getType(extensionOrPath));
  }
}

export default defaultMime;

// CLI execution
if (require.main === module) {
  cli(process.argv.slice(2));
}

// mime/lite.js (Lite version implementation example)
export const liteMime = new Mime(standardTypes);
```

This code implements the core functionalities, including type lookup based on file paths and extensions, custom type definition, and a command-line interface.